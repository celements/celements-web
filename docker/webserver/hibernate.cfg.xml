<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD//EN"
  "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <!-- Please refer to the installation guide on
         http://platform.xwiki.org/xwiki/bin/view/AdminGuide/Installation for configuring your
         database. You'll need to do 2 things:
         1) Copy your database driver JAR in WEB-INF/lib or in some shared lib directory
         2) Uncomment the properties below for your specific DB (and comment the default 
            database configuration if it doesn't match your DB)
    -->

    <!-- Generic parameters common to all Databases -->
    <property name="show_sql">false</property>
    <property name="use_outer_join">true</property>
    <property name="dbcp.defaultAutoCommit">false</property>
    <property name="dbcp.maxActive">50</property>
    <property name="dbcp.maxIdle">5</property>
    <property name="dbcp.maxWait">30000</property>
    <property name="dbcp.whenExhaustedAction">1</property>
    <property name="dbcp.ps.whenExhaustedAction">1</property>
    <property name="dbcp.ps.maxActive">20</property>
    <property name="dbcp.ps.maxWait">120000</property>
    <property name="dbcp.ps.maxIdle">20</property>

    <!-- database configuration -->    
    <property name="connection.url">${DB_SCHEME}://${DB_HOST}:${DB_PORT}/${DB_PREFIX}_main?useServerPrepStmts=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;sessionVariables=sql_mode='</property>
    <property name="connection.username">${DB_USER}</property>
    <property name="connection.password">${DB_PASSWORD}</property>
    <property name="connection.driver_class">${DB_DRIVER}</property>
    <property name="dialect">com.celements.query.CelMySQLDialect</property>
    <property name="connection.provider_class">com.xpn.xwiki.store.DBCPConnectionProvider</property>
    <property name="connection.pool_size">10</property>
    <property name="statement_cache.size">2</property>
  
    <!-- mappings -->
    <!-- celements-xwiki-core -->
    <mapping resource="xwiki.celements.hbm.xml"/>
    <mapping resource="feeds.celements.hbm.xml"/>
    <!-- celements-core -->
    <mapping resource="celements.hbm.xml"/>
    <mapping resource="config_type_class.hbm.xml"/>
    <mapping resource="config_type_properties_class.hbm.xml"/>
    <!-- celements-calendar -->
    <mapping resource="event_class.hbm.xml"/>
    <!-- celements-blog -->
    <mapping resource="celements_blog.hbm.xml" />
    <!-- celements-photo -->
    <mapping resource="image_classes.hbm.xml"/>

  </session-factory>
</hibernate-configuration>
