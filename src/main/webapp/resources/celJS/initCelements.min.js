!function(){"use strict";if(void 0===window.console&&(window.console={}),void 0===window.console.error&&(window.console.error=Prototype.emptyFunction),void 0===window.console.warn&&(window.console.warn=window.console.error),void 0===window.console.info&&(window.console.info=window.console.warn),void 0===window.console.log&&(window.console.log=window.console.info),void 0===window.console.debug&&(window.console.debug=window.console.log),void 0===window.CELEMENTS&&(window.CELEMENTS={}),void 0===window.CELEMENTS.mixins&&(window.CELEMENTS.mixins={}),void 0===window.CELEMENTS.mixins.Event&&(window.CELEMENTS.mixins.Event=Class.create({memo:void 0,stopped:void 0,eventName:void 0,initialize:function(e,t){this.memo=t,this.eventName=e,this.stopped=!1},stop:function(){this.stopped=!0},findElement:function(){}})),void 0===window.CELEMENTS.mixins.Observable&&(window.CELEMENTS.mixins.Observable={_celEventHash:null,_getCelEventHash:function(e){const t=this;return t._celEventHash||(t._celEventHash=new Hash),e?(t._celEventHash.get(e)||t._celEventHash.set(e,new Array),t._celEventHash.get(e)):t._celEventHash},celObserve:function(e,t){if(console.debug("cel celObserve: ",this._celEventHash,e,t),!e)throw"undefined eventKey in observe call ";this._getCelEventHash(e).push(t)},celStopObserving:function(e,t){if(console.debug("cel celStopObserving: ",this._celEventHash,e,t),!e)throw"undefined eventKey in celStopObserving call ";this._getCelEventHash().set(e,this._getCelEventHash(e).without(t))},celFire:function(e,t){if(console.debug("cel celFire: ",this._celEventHash,e,t),!e)throw"undefined eventKey in celObserve call ";const n=new CELEMENTS.mixins.Event(e,t);return this._getCelEventHash(e).each((function(t){try{t(n)}catch(n){console.error("listener in celFire failed for event ",e,t,n)}})),n}}),void 0===window.CELEMENTS.Ajax&&(window.CELEMENTS.Ajax={}),window.Ajax&&!window.CELEMENTS.Ajax_CORSfixInstalled&&(window.Try={logging:!1,these:function(){let e=void 0;for(let t=0,n=arguments.length;t<n;t++){const n=arguments[t];try{e=n();break}catch(e){Try.logging&&console.log("Try.these skip lambda ",n,e)}}return e}},window.Ajax.getCORS_Transport=function(){return Try.these((function(){return new XDomainRequest}),(function(){return new XMLHttpRequest}),(function(){return new ActiveXObject("Msxml2.XMLHTTP")}),(function(){return new ActiveXObject("Microsoft.XMLHTTP")}))||!1},window.Ajax.Request.logging=!1,window.Ajax.Request.addMethods({_status:void 0,_readyState:void 0,initialize:function(e,t,n){e(n),this.url=t,!this.isSameOrigin()||this.options.crossSite?this.transport=Ajax.getCORS_Transport():this.transport=Ajax.getTransport(),this.request(t)},request:function(e){this.url=e,this.method=this.options.method,this._status=0,this.transport.setRequestHeader||(this.method="get");let t=Object.isString(this.options.parameters)?this.options.parameters:Object.toQueryString(this.options.parameters);["get","post"].include(this.method)||(t+=(t?"&":"")+"_method="+this.method,this.method="post"),t&&"get"===this.method&&(this.url+=(this.url.include("?")?"&":"?")+t),this.parameters=t.toQueryParams();try{const e=new Ajax.Response(this);this.options.onCreate&&this.options.onCreate(e),Ajax.Responders.dispatch("onCreate ",this,e),this.transport.open(this.method.toUpperCase(),this.url,this.options.asynchronous),this.options.asynchronous&&this.respondToReadyState.bind(this).defer(1),this.transport.onprogress=Prototype.emptyFunction,this.transport.onreadystatechange=this.onStateChange.bind(this),this.transport.onload=this.onLoad.bind(this),this.transport.onerror=this.onError.bind(this);try{this.setRequestHeaders()}catch(e){Ajax.Request.logging&&console.warn("setRequestHeaders failed ",this.url,e)}this.body="post"==this.method?this.options.postBody||t:null,this.transport.send(this.body),!this.options.asynchronous&&this.transport.overrideMimeType&&this.onStateChange()}catch(e){this.dispatchException(e)}},onStateChange:function(){const e=this.transport.readyState;if(e>1&&(4!=e||!this._complete)){try{4==e&&(this._status=this.transport.status||400)}catch(e){this._status=400,this._readyState=4,this._isAbortedBug=!0}this.respondToReadyState(e)}},onLoad:function(){this._status=this.transport.status||200,this._readyState=this.transport.readyState||4,this._complete||this.respondToReadyState(this._readyState)},onError:function(){this._status=this.transport.status||400,this._readyState=this.transport.readyState||4,this._complete||this.respondToReadyState(4)},getStatus:function(){this._status||(this._status=this.transport.status);try{return 1223===this._status?204:this._status||0}catch(e){return Ajax.Request.logging&&console.warn("failed to getStauts ",e),0}}}).bind(window.Ajax.Request),window.Ajax.Response.addMethods({_status:void 0,initialize:function(e){this.request=e;const t=this.transport=e.transport,n=this.readyState=t.readyState||e._readyState;if(this._status=e._status,(n>2&&!Prototype.Browser.IE||4==n)&&(this.status=this.getStatus(),this.statusText=this.getStatusText(),e._isAbortedBug?this.responseText="":(this.responseText=String.interpret(t.responseText),this.headerJSON=this._getHeaderJSON())),4==n&&!e._isAbortedBug){const e=t.responseXML;this.responseXML=Object.isUndefined(e)?null:e,this.responseJSON=this._getResponseJSON()}},getStatus:Ajax.Request.prototype.getStatus}).bind(window.Ajax.Response),window.CELEMENTS.Ajax_CORSfixInstalled=!0),window.celOnBeforeLoadListenerArray=[],window.celAddOnBeforeLoadListener=function(e){celOnBeforeLoadListenerArray.push(e)},window.celOnFinishHeaderListenerArray=[],window.celAddOnFinishHeaderListener=function(e){window.celOnFinishHeaderListenerArray.push(e)},window.celFinishHeaderHandler=function(){$A(window.celOnFinishHeaderListenerArray).each((function(e){try{e()}catch(e){console.error("Failed to execute celOnFinishHeader listener. ",e)}}))},void 0===window.getCelDomain&&(window.getCelDomain=function(){return window.location.host.replace(/^www\./,"")}),void 0===window.CELEMENTS.LoadingIndicator&&(window.CELEMENTS.LoadingIndicator=Class.create({_loadingImg:void 0,initialize:function(){this._loadingImg=new Hash},getLoadingIndicator:function(e){const t=this;let n="ajax-loader-32px";return"boolean"==typeof e?e&&(n="ajax-loader-16px"):"number"==typeof e&&(n="ajax-loader-"+e+"px"),t._loadingImg.get(n)||t._loadingImg.set(n,new Element("img",{src:CELEMENTS.getUtils().getPathPrefix()+"/file/resources/celRes/spinner/"+n+".png",class:"editorLoading",alt:"loading..."})),t._loadingImg.get(n).clone()}})),void 0===window.CELEMENTS.Utils){window.CELEMENTS.Utils=Class.create({_srcOriginHost:void 0,getPathPrefix:function(){const e=this;if(!e._srcOriginHost){let t=null;const n=document.getElementsByTagName("script");let i=n.length;const o=new RegExp("(https?://[^/]*)/(([^/]*/)*)resources/celJS/initCelements(.min)?\\.js(\\?.*)?$");let s;for(;i--;){s=n[i].src;const e=s.match(o);if(s&&e){t=e[1];const n=e[2].split("/"),i=n.splice(0,n.length-2).join("/");""!=i&&(t+="/"+i);break}}console.log("getPathPrefix computed prefixPath: ",t),e._srcOriginHost=t}return e._srcOriginHost},convertFullNameToViewURL:function(e){return this.getPathPrefix()+("/"+e.replace(/\./,"/")).replace(/\/Content\//,"/")}});const e=new window.CELEMENTS.Utils;window.CELEMENTS.getUtils=function(){return e}}void 0===window.CELEMENTS.getPathPrefix&&(window.CELEMENTS.getPathPrefix=function(){return console.warn("deprecated call of window.CELEMENTS.getPathPrefix. Instead use window.CELEMENTS.getUtils().getPathPrefix()"),window.CELEMENTS.getUtils().getPathPrefix()}),void 0===window.getCelHost&&(window.getCelHost=function(){let e=document.location+"?";return e=document.location.pathname.indexOf("/skin/resources/")>-1?e.substring(0,e.indexOf("/skin/resources/")):document.location.pathname.indexOf("/file/resources/")>-1?e.substring(0,e.indexOf("/file/resources/")):e.substring(0,e.indexOf("?")),e}),void 0===window.CELEMENTS.Ajax.Reconnector&&(window.CELEMENTS.Ajax.Reconnector=Class.create({_htmlElem:void 0,_callbackOnSuccess:void 0,_reconnectWait:void 0,_reconnectorHandlerBind:void 0,_cancelAjaxOnTimeoutBind:void 0,_reconnectorExecuter:void 0,_reconnectWaitStart:void 0,_minReconnectWait:void 0,_maxReconnectWait:void 0,_url:void 0,_configObj:void 0,initialize:function(e,t,n){const i=this;i._htmlElem=$(e),i._configObj=n||{},i._url=i._configObj.url||window.getCelHost(),i._callbackOnSuccess=t,i._reconnectorHandlerBind=i._reconnectorHandler.bind(i),i._cancelAjaxOnTimeoutBind=i._cancelAjaxOnTimeout.bind(i),i._minReconnectWait=i._configObj.minReconnectWait||10,i._maxReconnectWait=i._configObj.maxReconnectWait||30,i._reset()},_reset:function(){this._reconnectWaitStart=this._minReconnectWait},setMinRecconectWait:function(e){this._minReconnectWait=e},setMaxRecconectWait:function(e){this._maxReconnectWait=e},_reconnectorHandler:function(){const e=this;if(e._reconnectWait--,0==e._reconnectWait){e._reconnectorExecuter.stop();if(!e._htmlElem.fire("celements:AjaxReconnectTrying",e._reconnectWait).stopped&&!e._configObj.skipRetryMsg){let t="Trying...";window.celMessages&&window.celMessages.Reconnector&&(t=window.celMessages.Reconnector.retryNotice),e._htmlElem.update(t)}e._connectionTester()}else{if(!e._htmlElem.fire("celements:AjaxReconnectTrying",e._reconnectWait).stopped&&!e._configObj.skipRetryMsg){let t="Retrying in {} seconds.";window.celMessages&&window.celMessages.Reconnector&&(t=window.celMessages.Reconnector.retryDelayNotice),t=t.replace("{}",e._reconnectWait),e._htmlElem.update(t),e._htmlElem.fire("celements:AjaxReconnectFailed")}}},start:function(){this._reconnectWait=this._reconnectWaitStart,this._reconnectorExecuter=new PeriodicalExecuter(this._reconnectorHandlerBind,1)},_cancelAjaxOnTimeout:function(e){e._complete||e.transport.abort()},_connectionTester:function(){const e=this,t=new Ajax.Request(e._url,{parameters:{ajax:1,xpage:"celements_ajax",ajax_mode:"pageTypeWithLayout",overwriteLayout:"SimpleLayout"},onSuccess:function(){e._reset(),e._reconnectorExecuter=null,e._callbackOnSuccess(),e._htmlElem.fire("celements:AjaxReconnectSuccess")},onFailure:function(){e._reconnectWaitStart=Math.min(2*e._reconnectWaitStart,e._maxReconnectWait),e.start()}});e._cancelAjaxOnTimeoutBind.delay(10,t)}})),window.CELEMENTS.UrlUtils=Class.create({getParams:function(e){let t=(e=e||window.location.search).split(new RegExp("[?&]"));return t.unshift(new Hash),t.reduce(this._splitUriSearch.bind(this))||new Hash},joinParams:function(e){let t=[];return $H(e).each((function(e){const n=e.value.map((function(t){return e.key+"="+encodeURI(t)}));t=t.concat(n)})),t.join("&")},_splitUriSearch:function(e,t){let n=t.split("=",1);if(n.length>0&&n[0].length>0){n=n[0];const i=decodeURI(t.substring(n.length+1));e.get(n)?e.get(n).push(i):e.set(n,[i])}return e}}),window.celMessages={},window.celMessages.isLoaded=!1;try{new Ajax.Request(window.getCelHost(),{method:"post",parameters:{xpage:"celements_ajax",ajax_mode:"Messages"},onSuccess:function(e){if(e.responseText.isJSON()){let t=e.responseText.evalJSON();console.log("initCelements.js: finished getting dictionary messages."),t.isLoaded=!0,window.celMessages=t,$(document.body).fire("cel:messagesLoaded",t)}else console.error("noJSON!!! ",e.responseText)}})}catch(e){console.error("Failed to get Cel-Messages async!",e)}window.celExecOnceAfterMessagesLoaded=function(e){window.celMessages.isLoaded?e(window.celMessages):($(document.body).stopObserving("cel:messagesLoaded",e),$(document.body).observe("cel:messagesLoaded",e))},void 0===window.CELEMENTS.CssClassEventHandler&&(window.CELEMENTS.CssClassEventHandler=Class.create({_htmlElement:void 0,_eventName:void 0,_cssSelector:void 0,_className:void 0,_actionFunction:void 0,_conditionFunction:void 0,_actionHandlerBind:void 0,initialize:function(e,t,n,i,o,s){const a=this;a._htmlElement=$(e),a._eventName=t,a._cssSelector=n,a._className=i,a._actionFunction=o,s&&!/\s|;/.test(s)&&(a._conditionFunction=new Function("me","origin","return "+s+";")),a._actionHandlerBind=a._actionHandler.bind(a),a._registerActionHandler()},_registerActionHandler:function(){const e=this;Event.stopObserving(e._htmlElement,e._eventName,e._actionHandlerBind),Event.observe(e._htmlElement,e._eventName,e._actionHandlerBind),console.debug("EventHandler - register: ",e._eventName,e._cssSelector,e._className,e._actionFunction.name,e._htmlElement)},_actionHandler:function(e){const t=this;t._getTargetElements().each((function(e){!t._conditionFunction||t._conditionFunction(e,t._htmlElement)?(t._actionFunction(e,t._className),console.debug("EventHandler -  upon",t._eventName,"action [",t._actionFunction.name,t._className,"] executed on",e)):console.debug("EventHandler - action skipped for failed condition [",t._conditionFunction,"] on ",e)}))},_getTargetElements:function(){const e=this;return e._cssSelector.startsWith("^")?(parent=e._htmlElement.up(e._cssSelector.substring(1)),parent?[parent]:[]):$$(e._cssSelector)},unregister:function(){Event.stopObserving(this._htmlElement,this._eventName,this._actionHandlerBind),console.debug("EventHandler - unregister: ",this._eventName,this._cssSelector,this._className,this._actionFunction.name,this._htmlElement)}})),void 0===window.CELEMENTS.EventManager&&(window.CELEMENTS.EventManager=Class.create({_instructionRegex:new RegExp("([\\w:]+)([%+-])([\\w-]+):([^?]+)\\??(.+)?"),_actionFunctionMap:{"+":Element.addClassName,"-":Element.removeClassName,"%":Element.toggleClassName},_eventElements:void 0,_interpretDataCelEventBind:void 0,_contentChangedHandlerBind:void 0,updateCelEventHandlersBind:void 0,_intersectionObserver:void 0,_intersectionValues:[],initialize:function(){const e=this;e._eventElements=new Array,e._interpretDataCelEventBind=e._interpretDataCelEvent.bind(e),e._contentChangedHandlerBind=e._contentChangedHandler.bind(e),e.updateCelEventHandlersBind=e.updateCelEventHandlers.bind(e),e._intersectionObserver=new IntersectionObserver((function(t){t.forEach(e._handleIntersection.bind(e))}),{threshold:[0,.5,1]})},_splitDataCelEventList:function(e){let t=new Array;return e&&(t=e.replace(/([^&])&([^&])/g,"$1#SPLIT#$2").split("#SPLIT#")),t},_parseEventInstruction:function(e){const t=e.match(this._instructionRegex)||[],n={eventName:t[1],action:t[2],className:t[3],cssSelector:t[4],condition:t[5]};if(n.eventName&&n.action&&n.className&&n.cssSelector)return n;throw"parseEventInstruction: unable to parse event instruction '"+e+"'"},_createEventHandler:function(e,t){const n=this,i=n._parseEventInstruction(t),o=n._actionFunctionMap[i.action];if(o)return(i.eventName.startsWith("cel:enter")||i.eventName.startsWith("cel:leave"))&&(n._intersectionObserver.observe(e),console.debug("observing intersection: ",e)),new window.CELEMENTS.CssClassEventHandler(e,i.eventName,i.cssSelector,i.className,o,i.condition);throw"createEventHandler: unknown action '"+i.action+'"'},_createEventElement:function(e){const t=this,n=e.readAttribute("data-cel-event");return{htmlElem:e,dataValue:n,eventHandlers:t._splitDataCelEventList(n).map((function(n){try{return t._createEventHandler(e,n)}catch(t){console.error("EventManager - interpretData: invalid instruction ",t,e)}})).filter(Boolean)}},_interpretDataCelEvent:function(e){const t=this,n="EventManager - interpretData: ";if(e.hasClassName("celOnEventInit"))console.debug(n,"skip already initialized: ",e);else if(e.up(".cel_template"))console.debug(n,"skip template element: ",e);else{const i=t._createEventElement(e);i.eventHandlers.length>0?(t._eventElements.push(i),console.debug(n,"new element ",e)):console.debug(n,"no valid instructions found on ",e),e.addClassName("celOnEventInit"),e.fire("celEM:init")}},_handleIntersection:function(e,t){const n=this._intersectionValues[t]||{y:0,ratio:0},i={y:e.boundingClientRect.y,ratio:e.intersectionRatio},o=e.isIntersecting&&i.ratio>n.ratio?"enter":"leave",s=i.y>n.y?"up":"down";let a=e.intersectionRatio;a="enter"===o?a>=1?":full":a>.5?":half":"":a>.5?":full":a>0?":half":"";let c="cel:"+o+a;console.debug("fire",c),e.target.fire(c),c+=":"+s,console.debug("fire",c),e.target.fire(c),this._intersectionValues[t]=i},_contentChangedHandler:function(e){console.debug("EventManager - contentChanged ",e),this.updateCelEventHandlers(e.memo.htmlElem)},updateCelEventHandlers:function(e){e=e||$(document.body),Event.stopObserving($(document.body),"celements:contentChanged",this._contentChangedHandlerBind),Event.observe($(document.body),"celements:contentChanged",this._contentChangedHandlerBind),this._removeDisappearedElems(),$(e).select(".celOnEvent").each(this._interpretDataCelEventBind)},_removeDisappearedElems:function(){const e=this;for(let t=e._eventElements.length-1;t>=0;t--){const n=e._eventElements[t],i=$(document.body).contains(n.htmlElem),o=n.htmlElem.readAttribute("data-cel-event")!==n.dataValue;i&&!o&&n.htmlElem.hasClassName("celOnEventInit")||(n.eventHandlers.each((function(e){e.unregister()})),e._eventElements.splice(t,1),n.htmlElem.removeClassName("celOnEventInit"),console.debug("EventManager - removeDisappearedElem: ",n))}}}),window.CELEMENTS.globalEventManager=new window.CELEMENTS.EventManager,celAddOnBeforeLoadListener(window.CELEMENTS.globalEventManager.updateCelEventHandlersBind));let e=new Hash;const t=function(t){if(t&&t.id){const n=new Validation(t,{immediate:!0,useTitles:!0,stopOnFirst:!1});e.set(t.id,n)}else console.error("failed to register validation on form with no id. ",t)};celAddOnBeforeLoadListener((function(){$$("form.cel_form_validation").each(t),$(document.body).observe("cel_yuiOverlay:contentChanged",(function(e){const n=e.findElement();n&&n.select("form.cel_form_validation").each(t)}))})),window.celAddOnFinishHeaderListener((function(){const e=$$('meta[name="cel-GAA-Num"]');if(e.size()>0&&""!=e[0].content){const c=e[0].content;t=window,n=document,i="script",o="ga",t.GoogleAnalyticsObject=o,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,s=n.createElement(i),a=n.getElementsByTagName(i)[0],s.async=1,s.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(s,a),ga("create",c,window.getCelDomain()),ga("set","anonymizeIp",!0),ga("send","pageview"),console.log("finish initalizing google universal analytics.",c)}var t,n,i,o,s,a})),celAddOnBeforeLoadListener((function(){void 0!==$j("img[usemap]").rwdImageMaps&&$j("img[usemap]").rwdImageMaps()})),celAddOnBeforeLoadListener((function(){CELEMENTS&&CELEMENTS.presentation&&CELEMENTS.presentation.getOverlayObj&&CELEMENTS.presentation.getOverlayObj()&&CELEMENTS.presentation.getOverlayObj({overlayLayout:"SimpleLayout"}).registerOpenHandler()}));let n=null;const i=function(){n.getInnerWidth()>n.getInnerHeight()?($(document.body).removeClassName("cel_orientation_portrait"),$(document.body).addClassName("cel_orientation_landscape")):($(document.body).removeClassName("cel_orientation_landscape"),$(document.body).addClassName("cel_orientation_portrait"))};celAddOnBeforeLoadListener((function(){CELEMENTS&&CELEMENTS.mobile&&CELEMENTS.mobile.Dimensions&&(n=new CELEMENTS.mobile.Dimensions,Event.stopObserving(window,"orientationchange",i),Event.observe(window,"orientationchange",i))}));const o=function(e){console.debug("initAllMultiselect"),null!=$j().multiselect?$j(".celBootstrap,.celMultiselect").filter(":visible,.celForceMultiselect").each((function(e,t){$(t).up(".cel_template")||(console.debug("initAllMultiselect: ",t),s(t))})):console.debug("initAllMultiselect: bootstrap multiselect undefined")},s=function(e){let t={numberDisplayed:3,onDropdownHidden:a,onChange:c},n=e.getAttribute("data-bootstrapConfig");!n&&e.getAttribute("data-multiselectAttr")&&(n=e.getAttribute("data-multiselectAttr"),console.warn("initAllMultiselect: deprecated data-multiselectAttr in use",e)),n&&(t=$j.extend(t,JSON.parse(n)));const i=$j(e).multiselect(t);$(document.body).fire("cel:multiselectInitialized",{multiselect:i})},a=function(e){$j(e.target).css("display",""),e.target.fire("cel:multiselectOnDropdownHidden")},c=function(e,t,n){console.debug("fire cel:multiselectOnChange on: ",this),$(e[0]).fire("cel:multiselectOnChange",{multiselect:this,checked:t,select:n})},r=function(e){$("tabMenuPanel").select(".celBootstrap,.celMultiselect").each((function(e){e.visible()&&e.addClassName("celForceMultiselect")})),o()};celAddOnBeforeLoadListener((function(){$(document.body).stopObserving("cel:initMultiselect",o),$(document.body).stopObserving("celements:contentChanged",o),$(document.body).observe("cel:initMultiselect",o),$(document.body).observe("celements:contentChanged",o),$("tabMenuPanel")&&($("tabMenuPanel").stopObserving("tabedit:tabLoadingFinished",r),$("tabMenuPanel").observe("tabedit:tabLoadingFinished",r)),$(document.body).fire("cel:initMultiselect")}));const l=function(e){$$("img.cel_fluidresizeWidth").each((function(e){e.setStyle({maxWidth:e.readAttribute("width")+"px"})})),$$("img.cel_fluidresizeHeight").each((function(e){e.setStyle({maxHeight:e.readAttribute("height")+"px"})}))};celAddOnBeforeLoadListener((function(){$(document.body).stopObserving("cel:initFluidImage",l),$(document.body).stopObserving("celements:contentChanged",l),$(document.body).observe("cel:initFluidImage",l),$(document.body).observe("celements:contentChanged",l)})),celAddOnBeforeLoadListener((function(){$$(".generalOverlayWrapper .generalOverlay .exitOnClose").each((function(e){e.stopObserving("click",d),e.observe("click",d)}))}));const d=function(e){e.stop(),window.close()}}()