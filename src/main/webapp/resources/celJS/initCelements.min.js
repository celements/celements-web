!function(a,b){"use strict";void 0===a.console&&(a.console={}),void 0===a.console.error&&(a.console.error=Prototype.emptyFunction),void 0===a.console.warn&&(a.console.warn=a.console.error),void 0===a.console.info&&(a.console.info=a.console.warn),void 0===a.console.log&&(a.console.log=a.console.info),void 0===a.console.debug&&(a.console.debug=a.console.log),void 0===a.CELEMENTS&&(a.CELEMENTS={}),void 0===a.CELEMENTS.mixins&&(a.CELEMENTS.mixins={}),void 0===a.CELEMENTS.mixins.Event&&(a.CELEMENTS.mixins.Event=Class.create({memo:b,stopped:b,eventName:b,initialize:function(b,c){let a=this;a.memo=c,a.eventName=b,a.stopped=!1},stop:function(){let a=this;a.stopped=!0},findElement:function(){}})),void 0===a.CELEMENTS.mixins.Observable&&(a.CELEMENTS.mixins.Observable={_celEventHash:null,_getCelEventHash:function(b){let a=this;return(a._celEventHash||(a._celEventHash=new Hash),b)?(a._celEventHash.get(b)||a._celEventHash.set(b,new Array),a._celEventHash.get(b)):a._celEventHash},celObserve:function(a,b){if(console.debug("cel celObserve: ",this._celEventHash,a,b),!a)throw"undefined eventKey in observe call ";this._getCelEventHash(a).push(b)},celStopObserving:function(a,b){if(console.debug("cel celStopObserving: ",this._celEventHash,a,b),!a)throw"undefined eventKey in celStopObserving call ";this._getCelEventHash().set(a,this._getCelEventHash(a).without(b))},celFire:function(a,b){if(console.debug("cel celFire: ",this._celEventHash,a,b),!a)throw"undefined eventKey in celObserve call ";let c=new CELEMENTS.mixins.Event(a,b);return this._getCelEventHash(a).each(function(b){try{b(c)}catch(d){console.error("listener in celFire failed for event ",a,b,d)}}),c}});let d=[];a.celAddOnBeforeLoadListener=function(a){console.warn('celAddOnBeforeLoad is deprecated since open-celements 5.4 / January 2022. Instead register a listener on "DOMContentLoaded"',a),d.push(a)},document.addEventListener("DOMContentLoaded",function(){d.forEach(function(a){try{a()}catch(b){console.error("Listener for celOnBeforeLoad failed: ",b)}}),$(document.body).fire("celements:beforeOnLoad")});let e=[];if(a.celAddOnFinishHeaderListener=function(a){e.push(a)},a.celFinishHeaderHandler=function(){e.forEach(function(a){try{a()}catch(b){console.error("Failed to execute celOnFinishHeader listener. ",b)}})},void 0===a.getCelDomain&&(a.getCelDomain=function(){let b=a.location.host;return b.replace(/^www\./,"")}),void 0===a.CELEMENTS.LoadingIndicator&&(a.CELEMENTS.LoadingIndicator=Class.create({_loadingImg:b,initialize:function(){let a=this;a._loadingImg=new Hash},getLoadingIndicator:function(b){let a="ajax-loader-32px";return"boolean"==typeof b?b&&(a="ajax-loader-16px"):"number"==typeof b&&(a="ajax-loader-"+b+"px"),this._loadingImg.get(a)||this._loadingImg.set(a,new Element("img",{src:CELEMENTS.getUtils().getPathPrefix()+"/file/resources/celRes/spinner/"+a+".png",class:"editorLoading",alt:"loading..."})),this._loadingImg.get(a).clone()}})),void 0===a.CELEMENTS.Utils){a.CELEMENTS.Utils=Class.create({_srcOriginHost:b,getPathPrefix:function(){let b=this;if(!b._srcOriginHost){let a=null,e=document.getElementsByTagName("script"),f=e.length,i=new RegExp("(https?://[^/]*)/(([^/]*/)*)resources/celJS/initCelements(.min)?\\.js(\\?.*)?$"),c;for(;f--;){c=e[f].src;let d=c.match(i);if(c&&d){a=d[1];let j=d[2],g=j.split("/"),h=g.splice(0,g.length-2).join("/");""!=h&&(a+="/"+h);break}}console.log("getPathPrefix computed prefixPath: ",a),b._srcOriginHost=a}return b._srcOriginHost},convertFullNameToViewURL:function(a){let b=this;return b.getPathPrefix()+("/"+a.replace(/\./,"/")).replace(/\/Content\//,"/")}});let f=new a.CELEMENTS.Utils;a.CELEMENTS.getUtils=function(){return f}}void 0===a.CELEMENTS.getPathPrefix&&(a.CELEMENTS.getPathPrefix=function(){return console.warn("deprecated call of window.CELEMENTS.getPathPrefix. Instead use window.CELEMENTS.getUtils().getPathPrefix()"),a.CELEMENTS.getUtils().getPathPrefix()}),void 0===a.getCelHost&&(a.getCelHost=function(){let a=document.location+"?";return document.location.pathname.indexOf("/skin/resources/")> -1?a.substring(0,a.indexOf("/skin/resources/")):document.location.pathname.indexOf("/file/resources/")> -1?a.substring(0,a.indexOf("/file/resources/")):a.substring(0,a.indexOf("?"))}),void 0===a.CELEMENTS.Ajax&&(a.CELEMENTS.Ajax={}),void 0===a.CELEMENTS.Ajax.Reconnector&&(a.CELEMENTS.Ajax.Reconnector=Class.create({_htmlElem:b,_callbackOnSuccess:b,_reconnectWait:b,_reconnectorHandlerBind:b,_cancelAjaxOnTimeoutBind:b,_reconnectorExecuter:b,_reconnectWaitStart:b,_minReconnectWait:b,_maxReconnectWait:b,_url:b,_configObj:b,initialize:function(c,d,e){let b=this;b._htmlElem=$(c),b._configObj=e||{},b._url=b._configObj.url||a.getCelHost(),b._callbackOnSuccess=d,b._reconnectorHandlerBind=b._reconnectorHandler.bind(b),b._cancelAjaxOnTimeoutBind=b._cancelAjaxOnTimeout.bind(b),b._minReconnectWait=b._configObj.minReconnectWait||10,b._maxReconnectWait=b._configObj.maxReconnectWait||30,b._reset()},_reset:function(){let a=this;a._reconnectWaitStart=a._minReconnectWait},setMinRecconectWait:function(a){let b=this;b._minReconnectWait=a},setMaxRecconectWait:function(a){let b=this;b._maxReconnectWait=a},_fireAjaxRecconectTrying:function(){return this._htmlElem.fire("celements:AjaxReconnectTrying",this._reconnectWait)},_reconnectorHandler:function(){if(this._reconnectWait--,0==this._reconnectWait){if(this._reconnectorExecuter.stop(),!this._fireAjaxRecconectTrying().stopped&&!this._configObj.skipRetryMsg){let c="Trying...";a.celMessages&&a.celMessages.Reconnector&&(c=a.celMessages.Reconnector.retryNotice),this._htmlElem.update(c)}this._connectionTester()}else if(!this._fireAjaxRecconectTrying().stopped&&!this._configObj.skipRetryMsg){let b="Retrying in {} seconds.";a.celMessages&&a.celMessages.Reconnector&&(b=a.celMessages.Reconnector.retryDelayNotice),b=b.replace("{}",this._reconnectWait),this._htmlElem.update(b),this._htmlElem.fire("celements:AjaxReconnectFailed")}},start:function(){let a=this;a._reconnectWait=a._reconnectWaitStart,a._reconnectorExecuter=new PeriodicalExecuter(a._reconnectorHandlerBind,1)},_cancelAjaxOnTimeout:function(a){a._complete||a.transport.abort()},_connectionTester:function(){let a=this,b=new Ajax.Request(a._url,{parameters:{ajax:1,xpage:"celements_ajax",ajax_mode:"pageTypeWithLayout",overwriteLayout:"SimpleLayout"},onSuccess:function(){a._reset(),a._reconnectorExecuter=null,a._callbackOnSuccess(),a._htmlElem.fire("celements:AjaxReconnectSuccess")},onFailure:function(){a._reconnectWaitStart=Math.min(2*a._reconnectWaitStart,a._maxReconnectWait),a.start()}});a._cancelAjaxOnTimeoutBind.delay(10,b)}})),a.CELEMENTS.UrlUtils=Class.create({getParams:function(b){b=b||a.location.search;let c=b.split(new RegExp("[?&]"));return c.unshift(new Hash),c.reduce(this._splitUriSearch.bind(this))||new Hash},joinParams:function(a){let b=[];return $H(a).each(function(a){let c=a.value.map(function(b){return a.key+"="+encodeURI(b)});b=b.concat(c)}),b.join("&")},_splitUriSearch:function(b,c){let a=c.split("=",1);if(a.length>0&&a[0].length>0){a=a[0];let d=decodeURI(c.substring(a.length+1));b.get(a)?b.get(a).push(d):b.set(a,[d])}return b}}),a.celMessages={},a.celMessages.isLoaded=!1;try{new Ajax.Request(a.getCelHost(),{method:"post",parameters:{xpage:"celements_ajax",ajax_mode:"Messages"},onSuccess:function(b){if(b.responseText.isJSON()){let c=b.responseText.evalJSON();console.log("initCelements.js: finished getting dictionary messages."),c.isLoaded=!0,a.celMessages=c,$(document.body).fire("cel:messagesLoaded",c)}else console.error("noJSON!!! ",b.responseText)}})}catch(c){console.error("Failed to get Cel-Messages async!",c)}let g=[];a.celExecOnceAfterMessagesLoaded=function(b){g.includes(b)||(g.push(b),a.celMessages.isLoaded?b(a.celMessages):$(document.body).observe("cel:messagesLoaded",a=>b(a.memo)))},void 0===a.CELEMENTS.CssClassEventHandler&&(a.CELEMENTS.CssClassEventHandler=Class.create({_htmlElement:b,_eventName:b,_cssSelector:b,_className:b,_actionFunction:b,_conditionFunction:b,_actionHandlerBind:b,initialize:function(c,d,e,f,g,b){let a=this;a._htmlElement=$(c),a._eventName=d,a._cssSelector=e,a._className=f,a._actionFunction=g,b&&!/\s|;/.test(b)&&(a._conditionFunction=new Function("me","origin","return "+b+";")),a._actionHandlerBind=a._actionHandler.bind(a),a._registerActionHandler()},_registerActionHandler:function(){Event.stopObserving(this._htmlElement,this._eventName,this._actionHandlerBind),Event.observe(this._htmlElement,this._eventName,this._actionHandlerBind),console.debug("EventHandler - register: ",this._eventName,this._cssSelector,this._className,this._actionFunction.name,this._htmlElement)},_actionHandler:function(b){let a=this;a._getTargetElements().each(function(b){!a._conditionFunction||a._conditionFunction(b,a._htmlElement)?(a._actionFunction(b,a._className),console.debug("EventHandler -  upon",a._eventName,"action [",a._actionFunction.name,a._className,"] executed on",b)):console.debug("EventHandler - action skipped for failed condition [",a._conditionFunction,"] on ",b)})},_getTargetElements:function(){return this._cssSelector.startsWith("^")?(parent=this._htmlElement.up(this._cssSelector.substring(1)))?[parent]:[]:$$(this._cssSelector)},unregister:function(){Event.stopObserving(this._htmlElement,this._eventName,this._actionHandlerBind),console.debug("EventHandler - unregister: ",this._eventName,this._cssSelector,this._className,this._actionFunction.name,this._htmlElement)}})),void 0===a.CELEMENTS.EventManager&&(a.CELEMENTS.EventManager=Class.create({_instructionRegex:new RegExp(/([\w:]+)([%+-])([\w-]+):([^?]+)\??(.+)?/),_actionFunctionMap:{"+":Element.addClassName,"-":Element.removeClassName,"%":Element.toggleClassName},_eventElements:b,_eventElemCounter:b,_interpretDataCelEventBind:b,_contentChangedHandlerBind:b,_intersectionObserver:b,_intersectionValues:[],initialize:function(){let a=this;a._eventElements=new Array,a._eventElemCounter=0,a._interpretDataCelEventBind=a._interpretDataCelEvent.bind(a),a._contentChangedHandlerBind=a._contentChangedHandler.bind(a);try{a._intersectionObserver=new IntersectionObserver(function(b){b.forEach(a._handleIntersection.bind(a))},{threshold:[0,.5,1]})}catch(b){console.warn("EventManager - initialize: IntersectionObserver not available",b)}},_splitDataCelEventList:function(a){let b=new Array;return a&&(b=a.replace(/([^&])&([^&])/g,"$1#SPLIT#$2").split("#SPLIT#")),b},_parseEventInstruction:function(c){let a=c.match(this._instructionRegex)||[],b={eventName:a[1],action:a[2],className:a[3],cssSelector:a[4],condition:a[5]};if(b.eventName&&b.action&&b.className&&b.cssSelector)return b;throw"parseEventInstruction: unable to parse event instruction '"+c+"'"},_createEventHandler:function(c,e){let b=this._parseEventInstruction(e),d=this._actionFunctionMap[b.action];if(d)return this._intersectionObserver&&(b.eventName.startsWith("cel:enter")||b.eventName.startsWith("cel:leave"))&&(this._intersectionObserver.observe(c),console.debug("EventManager - observing intersection",c.dataset.celEventNb,b)),new a.CELEMENTS.CssClassEventHandler(c,b.eventName,b.cssSelector,b.className,d,b.condition);throw"createEventHandler: unknown action '"+b.action+'"'},_createEventElement:function(a){let c=this,b=a.dataset.celEvent;return{htmlElem:a,dataValue:b,eventHandlers:c._splitDataCelEventList(b).map(function(b){try{return c._createEventHandler(a,b)}catch(d){console.error("EventManager - interpretData: invalid instruction ",d,a)}}).filter(Boolean)}},_interpretDataCelEvent:function(a){let b="EventManager - interpretData: ";if(a.classList.contains("celOnEventInit"))console.debug(b,"skip already initialized: ",a);else if(a.up(".cel_template"))console.debug(b,"skip template element: ",a);else{a.dataset.celEventNb=++this._eventElemCounter;let c=this._createEventElement(a);c.eventHandlers.length>0?this._eventElements.push(c):console.warn(b,"no valid instructions found on ",a),a.classList.add("celOnEventInit"),$(a).fire("celEM:init")}},_handleIntersection:function(b){let g=this,j=b.target,h=j.dataset.celEventNb,c=g._intersectionValues[h]||Object.freeze({y:Number.MAX_SAFE_INTEGER,ratio:0}),a=Object.freeze({y:b.boundingClientRect.y,ratio:b.intersectionRatio}),k=a.y>c.y?"up":"down",i=b.isIntersecting&&a.ratio>=c.ratio?"enter":"leave",e="enter"===i?a.ratio:c.ratio,f="leave"===i?a.ratio:c.ratio,d=[];e>=1&&f<1&&d.push(":full"),e>=.5&&f<.5&&d.push(":half"),e>0&&f<=0&&d.push(""),d.forEach(function(b){["cel:"+i+b,"cel:"+i+b+":"+k].forEach(function(b){console.debug("EventManager - intersect",b,"on",h,c,"->",a),j.fire(b)})}),g._intersectionValues[h]=a},_contentChangedHandler:function(a){console.debug("EventManager - contentChanged ",a),a.memo&&a.memo.htmlElem?this.updateCelEventHandlers(a.memo.htmlElem):this.updateCelEventHandlers()},updateCelEventHandlers:function(a){let b=a||document.body;Event.stopObserving($(document.body),"celements:contentChanged",this._contentChangedHandlerBind),Event.observe($(document.body),"celements:contentChanged",this._contentChangedHandlerBind),this._removeDisappearedElems(),b.querySelectorAll(".celOnEvent").forEach(this._interpretDataCelEventBind)},_removeDisappearedElems:function(){let c=this;for(let b=c._eventElements.length-1;b>=0;b--){let a=c._eventElements[b],d=$(document.body).contains(a.htmlElem),e=a.htmlElem.dataset.celEvent!==a.dataValue;d&&!e&&a.htmlElem.classList.contains("celOnEventInit")||(a.eventHandlers.forEach(function(a){a.unregister()}),c._eventElements.splice(b,1),a.htmlElem.classList.remove("celOnEventInit"),console.debug("EventManager - removeDisappearedElem: ",a))}}}),a.CELEMENTS.globalEventManager=new a.CELEMENTS.EventManager,document.addEventListener("DOMContentLoaded",a.CELEMENTS.globalEventManager._contentChangedHandlerBind));let h=new Hash,i=function(a){if(a&&a.id){let b=new Validation(a,{immediate:!0,useTitles:!0,stopOnFirst:!1});h.set(a.id,b)}else console.error("failed to register validation on form with no id. ",a)};document.addEventListener("DOMContentLoaded",function(){$$("form.cel_form_validation").each(i),$(document.body).observe("cel_yuiOverlay:contentChanged",function(b){let a=b.findElement();a&&a.select("form.cel_form_validation").each(i)})}),a.celAddOnFinishHeaderListener(function(){let g=$$('meta[name="cel-GAA-Num"]');if(g.size()>0&&""!=g[0].content){var c,h,i,n,d,e,j,k,l,o,f,m;let b=g[0].content;if(b.startsWith("UA-"))c=a,h=document,i="script",n="//www.google-analytics.com/analytics.js",d="ga",c.GoogleAnalyticsObject=d,c[d]=c[d]||function(){(c[d].q=c[d].q||[]).push(arguments)},c[d].l=1*new Date,e=h.createElement(i),j=h.getElementsByTagName(i)[0],e.async=1,e.src=n,j.parentNode.insertBefore(e,j),ga("create",b,a.getCelDomain()),ga("set","anonymizeIp",!0),ga("send","pageview"),console.log("finish initalizing google universal analytics.",b);else{function p(){dataLayer.push(arguments)}k=document,l="script",o="https://www.googletagmanager.com/gtag/js?id="+b,f=k.createElement(l),m=k.getElementsByTagName(l)[0],f.async=1,f.src=o,m.parentNode.insertBefore(f,m),a.dataLayer=a.dataLayer||[],p("js",new Date),p("config",b),console.log("finish initalizing google analytics v4.",b)}}}),document.addEventListener("DOMContentLoaded",function(){void 0!==$j("img[usemap]").rwdImageMaps&&$j("img[usemap]").rwdImageMaps()}),document.addEventListener("DOMContentLoaded",function(){CELEMENTS&&CELEMENTS.presentation&&CELEMENTS.presentation.getOverlayObj&&CELEMENTS.presentation.getOverlayObj()&&CELEMENTS.presentation.getOverlayObj({overlayLayout:"SimpleLayout"}).registerOpenHandler()});let j=null,k=function(){let a=j.getInnerWidth(),b=j.getInnerHeight();a>b?($(document.body).removeClassName("cel_orientation_portrait"),$(document.body).addClassName("cel_orientation_landscape")):($(document.body).removeClassName("cel_orientation_landscape"),$(document.body).addClassName("cel_orientation_portrait"))};document.addEventListener("DOMContentLoaded",function(){CELEMENTS&&CELEMENTS.mobile&&CELEMENTS.mobile.Dimensions&&(j=new CELEMENTS.mobile.Dimensions,Event.stopObserving(a,"orientationchange",k),Event.observe(a,"orientationchange",k))});let l=function(a){console.debug("initAllMultiselect"),b!=$j().multiselect?$j(".celBootstrap,.celMultiselect").filter(":visible,.celForceMultiselect").each(function(b,a){$(a).up(".cel_template")||(console.debug("initAllMultiselect: ",a),m(a))}):console.debug("initAllMultiselect: bootstrap multiselect undefined")},m=function(a){let c={numberDisplayed:3,onDropdownHidden:n,onChange:o},b=a.getAttribute("data-bootstrapConfig");!b&&a.getAttribute("data-multiselectAttr")&&(b=a.getAttribute("data-multiselectAttr"),console.warn("initAllMultiselect: deprecated data-multiselectAttr in use",a)),b&&(c=$j.extend(c,JSON.parse(b)));let d=$j(a).multiselect(c);$(document.body).fire("cel:multiselectInitialized",{multiselect:d})},n=function(a){$j(a.target).css("display",""),a.target.fire("cel:multiselectOnDropdownHidden")},o=function(a,b,c){console.debug("fire cel:multiselectOnChange on: ",this),$(a[0]).fire("cel:multiselectOnChange",{multiselect:this,checked:b,select:c})},p=function(a){$("tabMenuPanel").select(".celBootstrap,.celMultiselect").each(function(a){a.visible()&&a.addClassName("celForceMultiselect")}),l(a)};document.addEventListener("DOMContentLoaded",function(){$(document.body).stopObserving("cel:initMultiselect",l),$(document.body).stopObserving("celements:contentChanged",l),$(document.body).observe("cel:initMultiselect",l),$(document.body).observe("celements:contentChanged",l),$("tabMenuPanel")&&($("tabMenuPanel").stopObserving("tabedit:tabLoadingFinished",p),$("tabMenuPanel").observe("tabedit:tabLoadingFinished",p)),$(document.body).fire("cel:initMultiselect")});let q=function(a){$$("img.cel_fluidresizeWidth").each(function(a){a.setStyle({maxWidth:a.readAttribute("width")+"px"})}),$$("img.cel_fluidresizeHeight").each(function(a){a.setStyle({maxHeight:a.readAttribute("height")+"px"})})};document.addEventListener("DOMContentLoaded",function(){$(document.body).stopObserving("cel:initFluidImage",q),$(document.body).stopObserving("celements:contentChanged",q),$(document.body).observe("cel:initFluidImage",q),$(document.body).observe("celements:contentChanged",q)}),document.addEventListener("DOMContentLoaded",function(){$$(".generalOverlayWrapper .generalOverlay .exitOnClose").each(function(a){a.stopObserving("click",r),a.observe("click",r)})});let r=function(b){b.stop(),a.close()},s=function(){void 0!==$j.format&&$j.format.locale({date:celMessages.jqueryFormater})};document.addEventListener("DOMContentLoaded",function(){a.celMessages.isLoaded&&"object"==typeof celMessages.jqueryFormater?s():$(document.body).observe("cel:messagesLoaded",s)})}(window)
